# 도커와 쿠버네티스 실전 활용하기

---

![image-20210707101439380](도커와_쿠버네티스_실전_활용하기.assets/image-20210707101439380.png)

## 서버를 관리한다는 것

---

![image-20210707101928601](도커와_쿠버네티스_실전_활용하기.assets/image-20210707101928601.png)

> 서버의 상태를 관리하기 위한 노력들



### 자체 서버를 운영하게 된다면.....

* 서버 주문 > 서버 설치  > CPU, 메모리, 하드디스크 조립 > 네트워크 연결 > OS 설치 > 계정 설정 > 방화벽 설정 > ///
* 서버를 설정하기 위해 많은 노력과 시간이 필요
* 성능이 좋은 걸 미리 구매하고 효율적인 사용을 위해 여러 애플리케이션을 설치



### 상태관리 도구 등장

> Ansible, Chef, Puppet



### Virtual Machine

​	|

### Cloud

​	|

### Paas



### 도커와 쿠버네티스의 등장

> 도커가 등장하고 서버관리/개발 방식이 완전히 바뀌게 됨

![image-20210707103955833](도커와_쿠버네티스_실전_활용하기.assets/image-20210707103955833.png)

기존의 Jenkins를 설치하거나 Wordpress를 설치하려면 Java 설치나, PHP, SQL 설치 등 다양한 것들을 설치해야 했다. 하지만 도커의 등장 후 `docker compose up` 명령어 하나면 이러한 설치들이 바로 된다. 또한 자원 격리같은 어려운 기술을 사용하기 쉽게한다.



### 도커와 가상머신과의 차이

![image-20210707104315113](도커와_쿠버네티스_실전_활용하기.assets/image-20210707104315113.png)

### 도커가 가져온 변화

* 클라우드 이미지보다 관리하기 쉬움
* 다른 프로세스와 격리되어 가상머신처럼 사용하지만 성능저하가 거의 없음
* 복잡한 기술(namespace, cgroups, network, ...)을 몰라도 사용할 수 있음
* 이미지 빌드 기록이 남음
* 코드와 설정으로 관리 > 재현 및 수정 가능
* 오픈소스 > 특정 회사 기술에 종속적이지 않음





## 쿠버네티스의 등장

---

> Container Orchestration
>
> 복잡한 컨테이너 환경을 효과적으로 관리하기 위한 도구

### 컨테이너 오케스트레이션

* Cluster

  * 중앙제어 (Master-Node) => Cluster 개념으로 묶여있는 컨테이너들을 필요한 컨테이너로 묶어서 관리
  * 네트워킹
  * 노드 스케일

* State

  * 상태관리 => 문제가 발생했을 때 알아서 처리

  * ```json
    {
        image : "app1"
        replicas : 2 => 3
    }
    ```

* Scheduling

  * 배포 관리

* Rollout / Rollback

  * 배포 버전관리

* Service Discovery

  * 서비스 등록 및 조회

* Volume

  * 볼륨 스토리지 확장 및 축소 자동으로 가능

![image-20210707105959633](도커와_쿠버네티스_실전_활용하기.assets/image-20210707105959633.png)

> 여러 컨테이너 오케스트레이션 툴이 나왔지만 Kubernates로 바뀜 ( 컨테이너를 쉽고 빠르게 배포/확장하고 관리를 자동화해주는 오픈소스 플랫폼)



## DevOps란?

---

![image-20210629103244227](도커와_쿠버네티스_실전_활용하기.assets/image-20210629103244227-1625705335649.png)

> DevOps는 소프트웨어의 개발과 운영의 합성어로서, 소프트웨어 개발자와 정보기술 전문가 간의 소통, 협업 및 통합을 강조하는 개발 환경이나 문화를 말한다. 또한 데브옵스는 소프트웨어 개발 조직과 운영 조직 간의 상호 의존적 대응이며 조직이 소프트웨어 제품과 서비스를 빠른 시간에 개발 및 배포하는 것을 목적으로 한다.





## DevOps 역할

---

![image-20210707113619098](도커와_쿠버네티스_실전_활용하기.assets/image-20210707113619098.png)

### 1. 코드 기반 인프라 관리

* Code 기반으로 시스템과 운영/배포 환경 구축
* 인프라 운영/관리 소스의 체크인 및 관리 수행

### 2. 버전 관리

* 소스 및 빌드 관리를 위한 단일 시스템
* 변경 사항을 커밋할 때마다 빌드
* 빌드 검증 테스트를 자동으로 수행
* Flag를 통해 Features 활성화

### 3. One Step 빌드/배포

* 한 번 클릭으로 빌드/배포(수동)
* 예약 작업을 통한 빌드/배포
* 검증 실패 시 배포 중지 및 알림

### 4. 장애 시 빠른 인프라 배포

* 문제 발생 시 기존 시스템 수정하지 않고, 재배포
* 환경 설정 스크립트 수정 및 변경